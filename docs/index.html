 <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MIAAD Admin Portal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <style>
    /* --- YOUR ORIGINAL CSS (UNCHANGED) --- */
    :root {
      --bg: #020617;
      --bg-soft: #020617;
      --accent: #6366f1;
      --accent-soft: rgba(99, 102, 241, 0.12);
      --text-main: #f9fafb;
      --text-muted: #9ca3af;
      --danger: #ef4444;
      --danger-soft: rgba(239, 68, 68, 0.1);
      --success: #22c55e;
      --success-soft: rgba(34, 197, 94, 0.1);
      --border: #1f2937;
      --card: #020617;
      --radius: 14px;
      --transition: 0.2s ease;
    }

    * { box-sizing: border-box; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b, #020617 52%);
      color: var(--text-main);
      min-height: 100vh;
      margin: 0;
    }

    body, input, button, textarea, select { font-family: inherit; }
    img { max-width: 100%; display: block; }
    a { color: inherit; text-decoration: none; }
    button { border: none; cursor: pointer; font: inherit; }
    .hidden { display: none !important; }

    /* LOGIN STYLES */
    .login-wrapper {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      zoom: 1.2;
    }

    .login-card {
      width: 100%;
      max-width: 440px;
      background: radial-gradient(circle at top left, #111827, #020617 55%);
      border-radius: 18px;
      padding: 26px 24px 24px;
      border: 1px solid rgba(148, 163, 184, 0.2);
      box-shadow: 0 24px 70px rgba(15, 23, 42, 0.7);
      color: #e5e7eb;
    }

    .login-logo { display: flex; align-items: center; gap: 12px; margin-bottom: 18px; }
    .logo-circle {
      width: 40px; height: 40px; border-radius: 14px;
      background: radial-gradient(circle at top left, #4f46e5, #1d4ed8);
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 18px;
      box-shadow: 0 14px 30px rgba(59, 130, 246, 0.7);
    }
    .login-title { font-size: 18px; font-weight: 600; letter-spacing: 0.03em; }
    .login-subtitle { font-size: 13px; color: #9ca3af; margin-top: 2px; }
    .badge {
      display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px;
      border-radius: 999px; font-size: 11px;
      background: rgba(15, 23, 42, 0.8);
      border: 1px solid rgba(148, 163, 184, 0.4);
      margin-bottom: 10px;
    }
    .badge-dot {
      width: 7px; height: 7px; border-radius: 999px;
      background: #22c55e; box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.2);
    }
    .form-group { margin-bottom: 14px; }
    .form-label { display: block; font-size: 12px; margin-bottom: 4px; color: #e5e7eb; }
    .form-input {
      width: 100%; padding: 9px 11px; border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.55);
      background: rgba(15, 23, 42, 0.85); color: #e5e7eb;
      font-size: 13px; outline: none;
      transition: 0.2s ease;
    }
    .form-input:focus {
      border-color: #6366f1;
      box-shadow: 0 0 0 1px rgba(129, 140, 248, 0.9);
      background: rgba(15, 23, 42, 0.95);
    }
    .btn-primary {
      width: 100%; padding: 9px 12px; border-radius: 999px;
      background: linear-gradient(90deg, #4f46e5, #6366f1);
      color: white; font-size: 13px; font-weight: 500;
      border: none; display: inline-flex; align-items: center; justify-content: center;
      gap: 6px; box-shadow: 0 18px 40px rgba(79, 70, 229, 0.65);
      transition: 0.15s ease; margin-top: 6px;
    }
    .btn-primary:hover { transform: translateY(-1px); filter: brightness(1.07); }
    .login-error {
      margin-top: 10px; padding: 8px 10px; border-radius: 10px;
      background: rgba(248, 113, 113, 0.12); color: #fecaca;
      font-size: 12px; border: 1px solid rgba(248, 113, 113, 0.5);
      display: flex; align-items: flex-start; gap: 8px;
    }

    /* DASHBOARD STYLES */
    .app-shell { display: flex; flex-direction: column; min-height: 100vh; zoom: 1.2; }
    .topbar {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px 18px; border-bottom: 1px solid rgba(15, 23, 42, 0.9);
      background: radial-gradient(circle at top left, #020617, #020617);
      position: sticky; top: 0; z-index: 20; backdrop-filter: blur(14px);
    }
    .app-main { padding: 16px 18px 40px; max-width: 1120px; margin: 0 auto; width: 100%; }
    
    /* Table Styles */
    .table-wrapper {
      background: radial-gradient(circle at top left, #020617, #020617 60%);
      border-radius: 18px; padding: 10px 10px 12px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.9);
      overflow-x: auto;
    }
    table { width: 100%; border-collapse: collapse; font-size: 12px; }
    th, td { padding: 8px 10px; text-align: left; border-bottom: 1px solid rgba(31, 41, 55, 0.9); white-space: nowrap; }
    th { color: #9ca3af; font-weight: 500; font-size: 11px; }
    .btn-small {
      padding: 4px 8px; border-radius: 999px; font-size: 11px;
      border: 1px solid rgba(148, 163, 184, 0.5);
      background: rgba(15, 23, 42, 0.9); color: #e5e7eb;
      margin-right: 4px;
    }
    .btn-approve { border-color: rgba(34, 197, 94, 0.7); color: #bbf7d0; background: rgba(21, 128, 61, 0.25); }
    .btn-reject { border-color: rgba(248, 113, 113, 0.7); color: #fecaca; background: rgba(185, 28, 28, 0.3); }
    .user-chip { display: flex; align-items: center; gap: 8px; font-size: 12px; }
  </style>
</head>
<body>

  <div id="login-screen" class="login-wrapper">
    <div class="login-card">
      <div class="login-logo">
        <div class="logo-circle">M</div>
        <div>
          <div class="login-title">MIAAD Admin Portal</div>
          <div class="login-subtitle">Sign in with static credentials</div>
        </div>
      </div>

      <form id="login-form">
        <div class="form-group">
          <label class="form-label">Admin email</label>
          <input id="email" type="text" class="form-input" placeholder="admin@miaad.com" />
        </div>
        <div class="form-group">
          <label class="form-label">Password</label>
          <input id="password" type="password" class="form-input" placeholder="admin123" />
        </div>
        <button type="submit" class="btn-primary">Sign in to dashboard</button>
        <div id="login-error" class="login-error hidden">Invalid credentials</div>
      </form>
    </div>
  </div>

  <div id="app-shell" class="app-shell hidden">
    <header class="topbar">
      <div><b>MIAAD Admin</b></div>
      <div>
        <span style="font-size: 12px; color: #9ca3af; margin-right: 10px;">admin@miaad.com</span>
        <button id="logout-btn" class="btn-small">Logout</button>
      </div>
    </header>

    <main class="app-main">
      <h2 style="margin-top: 0;">Vendor Requests</h2>
      <div class="table-wrapper">
        <div id="loading-text" style="padding: 20px; text-align: center; color: #9ca3af;">Loading data...</div>
        <table id="requests-table" class="hidden">
          <thead>
            <tr>
              <th>Name</th>
              <th>Category</th>
              <th>Email</th>
              <th>Docs</th>
              <th>Description</th>
              <th>Status</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </main>
  </div>

  <script>
    // 1. FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyBe0gg21Z-LtB4S-qdUWiyP_zgtqcIiPds",
      authDomain: "miaad-9d683.firebaseapp.com",
      databaseURL: "https://miaad-9d683-default-rtdb.firebaseio.com",
      projectId: "miaad-9d683",
      storageBucket: "miaad-9d683.firebasestorage.app",
      messagingSenderId: "756163933067",
      appId: "1:756163933067:web:c53fb315ae18b71bcbb58e"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 2. LOGIC
    const loginScreen = document.getElementById("login-screen");
    const appShell = document.getElementById("app-shell");
    const loginForm = document.getElementById("login-form");
    const loginError = document.getElementById("login-error");
    const logoutBtn = document.getElementById("logout-btn");
    
    // Check if already logged in (Persistent Session)
    if (localStorage.getItem("isAdmin") === "true") {
      showDashboard();
    }

    loginForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const email = document.getElementById("email").value.trim();
      const password = document.getElementById("password").value.trim();

      // STATIC CREDENTIAL CHECK
      if (email === "admin@miaad.com" && password === "admin123") {
        localStorage.setItem("isAdmin", "true"); // Save session
        showDashboard();
      } else {
        loginError.classList.remove("hidden");
      }
    });

    logoutBtn.addEventListener("click", () => {
      localStorage.removeItem("isAdmin");
      window.location.reload();
    });

    function showDashboard() {
      loginScreen.classList.add("hidden");
      appShell.classList.remove("hidden");
      startFirestoreListener();
    }

    // 3. FIRESTORE DATA
    function startFirestoreListener() {
      const tbody = document.getElementById("tbody");
      const table = document.getElementById("requests-table");
      const loadingText = document.getElementById("loading-text");

      db.collection("vendors").where("status", "==", "pending")
        .onSnapshot((snapshot) => {
          tbody.innerHTML = "";
          
          if (snapshot.empty) {
            loadingText.textContent = "No pending requests.";
            table.classList.add("hidden");
            loadingText.classList.remove("hidden");
          } else {
            loadingText.classList.add("hidden");
            table.classList.remove("hidden");
            
            snapshot.forEach((doc) => {
              const data = doc.data();
              const tr = document.createElement("tr");
              tr.innerHTML = `
                <td>${data.name || '-'}</td>
                <td>${data.category || '-'}</td>
                <td>${data.email || '-'}</td>
                <td><a href="${data.docLink}" target="_blank" style="color:#6366f1">Link</a></td>
                <td>${(data.description || '').substring(0,30)}...</td>
                <td style="color:#facc15">${data.status}</td>
                <td>
                  <button class="btn-small btn-approve" onclick="updateStatus('${doc.id}', 'approved')">Approve</button>
                  <button class="btn-small btn-reject" onclick="updateStatus('${doc.id}', 'rejected')">Reject</button>
                </td>
              `;
              tbody.appendChild(tr);
            });
          }
        }, (error) => {
          console.error(error);
          loadingText.textContent = "Error loading data: " + error.message;
        });
    }

    window.updateStatus = function(docId, newStatus) {
      if(!confirm("Confirm status change?")) return;
      db.collection("vendors").doc(docId).update({ status: newStatus });
    }
  </script>
</body>
</html>